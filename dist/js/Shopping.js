"use strict";var proArr=[{pname:"小米",p:"小米史上最贵手机",price:1111,id:0,img:"../img/xm.jpg"},{pname:"苹果",p:"苹果史上最贵手机",price:2222,id:1,img:"../img/pg.jpg"},{pname:"华为",p:"华为史上最贵手机",price:3333,id:2,img:"../img/hw.jpg"},{pname:"三星",p:"三星史上最贵手机",price:4444,id:3,img:"../img/sx.jpg"}],html="",box=document.querySelector("#box"),ul=document.querySelector("ul");proArr.forEach(function(t){html+='\n            <li>\n            <img src="'.concat(t.img,'" alt="">\n            <p>').concat(t.p,"</p>\n            <p>").concat(t.price,'</p>\n            <button data-id="').concat(t.id,'" class="addC">加入购物车</button>\n</li>\n        ')}),ul.innerHTML=html;var jsonStr=localStorage.getItem("carts"),arr=null;arr=jsonStr?JSON.parse(jsonStr):[];for(var btnArr=document.querySelectorAll(".addC"),i=0;i<btnArr.length;i++)btnArr[i].onclick=function(){var r=this.getAttribute("data-id"),n=proArr.find(function(t){return t.id==r});if(arr){var t=arr.find(function(t){return t.id==n.id});t?t.num++:(n.num=1,arr.push(n)),localStorage.setItem("carts",JSON.stringify(arr))}else{n.num=1;var e=[n];localStorage.setItem("carts",JSON.stringify(e))}upData()};function upData(){var r="";arr.forEach(function(t){r+='\n              <table>\n            <tr style="margin-top: 60px; display: inline-block" >\n                <td><input type="checkbox" class="checked"></td>\n                <td colspan="2"><img src="'.concat(t.img,'" alt="" style="width: 80px;height: 80px;margin-top: 60px;"> <span>').concat(t.p,'</span></td>\n                <td style="color: orangered ">').concat(t.price,'</td>\n                <td><input type="text" value="').concat(t.num,'" class="inpChnage" data-id="').concat(t.id,'"></td>\n                <td class="tda">').concat(t.num*t.price,'</td>\n                <td >\n                <button class="removeB" style="width: 200px;height: 50px;" data-id="').concat(t.id,'">删除</button>\n                <button class="jianB" style="width: 200px;height: 50px;" data-id="').concat(t.id,'">减</button>\n                <button class="jiaB" style="width: 200px;height: 50px;" data-id="').concat(t.id,'">加</button>\n\n                </td>\n            </tr>\n    </table>\n            ')}),box.innerHTML=r;for(var t=document.querySelectorAll(".removeB"),n=0;n<t.length;n++)t[n].onclick=function(){this.parentNode.parentNode.remove();var r=this.getAttribute("data-id");arr=arr.filter(function(t){return t.id!=r}),localStorage.setItem("carts",JSON.stringify(arr))};for(var e=document.querySelectorAll(".inpChnage"),a=0;a<e.length;a++)e[a].onchange=function(){var r=this.getAttribute("data-id"),t=arr.find(function(t){return t.id==r});this.value<=1?(t.num=1,this.value=1):t.num=this.value,localStorage.setItem("carts",JSON.stringify(arr)),upData()};for(var c=document.querySelectorAll(".jiaB"),i=0;i<c.length;i++)c[i].onclick=function(){var r=this.getAttribute("data-id");arr.find(function(t){return t.id==r}).num++,localStorage.setItem("carts",JSON.stringify(arr)),upData()};for(var o=document.querySelectorAll(".jianB"),l=0;l<o.length;l++)o[l].onclick=function(){var r=this.getAttribute("data-id"),t=arr.find(function(t){return t.id==r});t.num<=1?t.num=1:t.num--,localStorage.setItem("carts",JSON.stringify(arr)),upData()};var d=document.querySelectorAll(".checked"),u=(document.querySelectorAll("#price p")[0],document.querySelectorAll(".tda"),document.querySelector("#checkbox"));u.onclick=function(){if(u.checked)for(var t=0;t<d.length;t++)d[t].checked=!0,console.log(d[t].checkd);else for(var r=0;r<d.length;r++)d[r].checked=!1,console.log(d[r].checkd)}}upData();