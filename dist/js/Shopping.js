"use strict";var box=document.querySelector("#box"),ul=document.querySelector("ul"),jsonStr=localStorage.getItem("carts"),arr=null;arr=jsonStr?JSON.parse(jsonStr):[];for(var btnArr=document.querySelectorAll(".addC"),i=0;i<btnArr.length;i++)btnArr[i].onclick=function(){var t=this.getAttribute("data-id"),r=proArr.find(function(e){return e.id==t});if(arr){var e=arr.find(function(e){return e.id==r.id});e?e.num++:(r.num=1,arr.push(r)),localStorage.setItem("carts",JSON.stringify(arr))}else{r.num=1;var c=[r];localStorage.setItem("carts",JSON.stringify(c))}upData()};function upData(){var t="";function r(){$(".checked").on("click",function(){if($(".checked").length===$(".checked:checked").length?$("#checkbox").prop("checked",!0):$("#checkbox").prop("checked",!1),$("#checkbox").prop("checked")){for(var e=document.querySelectorAll(".checked"),t=document.querySelectorAll(".tda"),r=document.querySelector(".pinput"),c=0;c<e.length;c++)e[c].checked=!0,e[c].checked&&$("#checkbox").prop("checked",!0);var n=0;t.forEach(function(e){n+=parseInt(e.innerHTML)}),r.value=n}})}arr.forEach(function(e){t+='\n              <table>\n            <tr style="margin-top: 60px; display: inline-block" >\n                <td><input type="checkbox" class="checked"></td>\n                <td colspan="2"><img src="'.concat(e.img,'" alt="" style="width: 100px;height: 80px;margin-top: 60px;"><span>').concat(e.nameStr,'</span></td>\n                <td style="color: orangered ">').concat(e.priceStr,'</td>\n                <td><input type="text" value="').concat(e.num,'" class="inpChnage" data-id="').concat(e.priceStr,'"></td>\n                <td class="tda">').concat(e.num*e.priceStr,'</td>\n                <td >\n                <button class="removeB"  data-id="').concat(e.priceStr,'">删除</button>\n                <button class="jianB"  data-id="').concat(e.priceStr,'">减</button>\n                <button class="jiaB"  data-id="').concat(e.priceStr,'">加</button>\n\n                </td>\n            </tr>\n    </table>\n            ')}),box.innerHTML=t,$(".p4").click(function(){localStorage.getItem("carts")?(alert("清空成功"),localStorage.removeItem("carts"),location.reload()):alert("您购物车还没有商品怎么清空呢")});for(var e=document.querySelectorAll(".removeB"),c=0;c<e.length;c++)e[c].onclick=function(){this.parentNode.parentNode.remove();var t=this.getAttribute("data-id");arr=arr.filter(function(e){return e.priceStr!=t}),localStorage.setItem("carts",JSON.stringify(arr)),$(".checkbox").prop("checked",!1),upData(),r(),a()};for(var n=document.querySelectorAll(".inpChnage"),o=0;o<n.length;o++)n[o].onchange=function(){var t=this.getAttribute("data-id"),e=arr.find(function(e){return e.priceStr==t});this.value<=1?(e.num=1,this.value=1):e.num=this.value,localStorage.setItem("carts",JSON.stringify(arr)),upData(),a(),r()};function a(){for(var e=document.querySelectorAll(".checked"),t=document.querySelectorAll(".tda"),r=document.querySelector(".pinput"),c=0;c<e.length;c++)e[c].checked=!0,e[c].checked&&$("#checkbox").prop("checked",!0);var n=0;t.forEach(function(e){n+=parseInt(e.innerHTML),console.log(e.innerHTML)}),r.value=n}for(var d=document.querySelectorAll(".jiaB"),i=0;i<d.length;i++)d[i].onclick=function(){var t=this.getAttribute("data-id");arr.find(function(e){return e.priceStr==t}).num++,localStorage.setItem("carts",JSON.stringify(arr)),upData(),a(),r()};for(var l=document.querySelectorAll(".jianB"),u=0;u<l.length;u++)l[u].onclick=function(){var t=this.getAttribute("data-id"),e=arr.find(function(e){return e.priceStr==t});e.num<=1?e.num=1:e.num--,localStorage.setItem("carts",JSON.stringify(arr)),upData(),a(),r()};var s=document.querySelectorAll(".checked"),p=(document.querySelectorAll("#price p")[0],document.querySelector(".pinput")),h=document.querySelector("#checkbox"),m=document.querySelectorAll(".tda");h.onclick=function(){if(h.checked){for(var e=0;e<s.length;e++)s[e].checked=!0;var t=0;m.forEach(function(e){t+=parseInt(e.innerHTML),console.log(e.innerHTML)}),p.value=t}else{for(var r=0;r<s.length;r++)s[r].checked=!1;p.value=0}}}function getAddress1582784398338(e){$(".bottom-l ul").children().remove(),e.list.forEach(function(e){var t=document.createElement("li"),r=document.createElement("a");r.href="javascript:;",r.innerText=e.name,t.appendChild(r),$(".bottom-l ul").append(t)}),$(".bottom-l ul li").first().remove()}function getAddress1582784284869(e){$(".bottom-r ul").children().remove(),e.list.forEach(function(e){var t=document.createElement("li"),r=document.createElement("a");r.href="javascript:;",r.innerText=e.name,t.appendChild(r),$(".bottom-r ul").append(t)}),$(".bottom-r ul li").first().remove()}upData(),$(function(){$(".header-div").on("click",function(e){$(".header-div-div").slideDown(500),$(this).css({background:"#fff"}),e.stopPropagation();var t=document.createElement("script");t.src="https://gensvr-n.vip.com/address/address?callback=getAddress1582784398338&areaid=0&newIsBind=0",$("body").append($(t)),$(t).remove()}),$(".header-div .top p").on("click",function(e){$(".header-div-div").hide(),$(".header-div").css({background:"#f5f5f5"}),e.stopPropagation()}),$(".header-div-div .bottom .btn1").on("click",function(e){$(this).css({"border-top":"2px solid #f10180",background:"#fff"}),$(".header-div-div .bottom .btn2").css({"border-top":"none",background:"#f8f8f8"}),$(".header-div div .bottom .bottom-l").show(),$(".header-div div .bottom .bottom-r").hide(),e.stopPropagation();var t=document.createElement("script");t.src="https://gensvr-n.vip.com/address/address?callback=getAddress1582784398338&areaid=0&newIsBind=0",$("body").append($(t)),$(t).remove()}),$(".header-div-div .bottom .btn2").on("click",function(e){$(this).css({"border-top":"2px solid #f10180",background:"#fff"}),$(".header-div-div .bottom .btn1").css({"border-top":"none",background:"#f8f8f8"}),$(".header-div div .bottom .bottom-r").show(),$(".header-div div .bottom .bottom-l").hide(),e.stopPropagation();var t=document.createElement("script");t.src="https://gensvr-n.vip.com/address/address?callback=getAddress1582784284869&areaid=104101&newIsBind=0",$("body").append($(t)),$(t).remove()}),$(document).on("click",function(e){$(".header-div-div").hide(),$(".header-div").css({background:"#f5f5f5"})}),$(".checked").on("click",function(){if($(".checked").length===$(".checked:checked").length?$("#checkbox").prop("checked",!0):$("#checkbox").prop("checked",!1),$("#checkbox").prop("checked")){for(var e=document.querySelectorAll(".checked"),t=document.querySelectorAll(".tda"),r=document.querySelector(".pinput"),c=0;c<e.length;c++)e[c].checked=!0,e[c].checked&&$("#checkbox").prop("checked",!0);var n=0;t.forEach(function(e){n+=parseInt(e.innerHTML)}),r.value=n}else $(".pinput").val(0)})});